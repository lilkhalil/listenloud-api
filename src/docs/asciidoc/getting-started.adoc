= Listen Loud REST API Getting Started Guide
Aidar Khalilov;
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 4
:sectlinks:

[[introduction]]
= Введение

ListenLoud — это веб-служба RESTful для создания и хранения музыки. Он использует гипермедиа
для описания отношений между ресурсами и обеспечения навигации между ними.



[[getting_started_running_the_service]]
== Запуск службы
Заметки RESTful написаны с использованием https://projects.spring.io/spring-boot[Spring Boot], который
упрощает его настройку и запуск, чтобы вы могли приступить к изучению REST API.

Первый шаг — клонировать репозиторий Git:

[source,bash]
----
$ git clone https://github.com/lilkhalil/listenloud-api
----

После завершения клонирования вы готовы запустить службу:

[source,bash]
----
$ cd listenloud-api
$ ./mvnw clean package
$ java -jar target/*.jar
----

Вы можете проверить, запущена ли служба, выполнив простой запрос, используя
URL-адрес:

include::{snippets}/index/1/curl-request.adoc[]

Этот запрос должен привести к следующему ответу в
https://github.com/mikekelly/hal_specification[Язык гипертекстовых приложений (HAL)]
формате:

include::{snippets}/index/1/http-response.adoc[]

Обратите внимание на `_links` в ответе JSON. Они являются ключом к навигации по API.

[[getting_started_authentication]]
== Сервис аутентификации
Теперь, когда вы запустили службу и убедились, что она работает, следующим шагом будет использование
это для регистрации нового пользователя. Как вы видели выше, URI для работы с регистрацией включен как
ссылка, когда вы выполняете запрос `GET` к корню службы:

include::{snippets}/index/2/http-response.adoc[]

[[getting_started_authentication_register]]
=== Регистрация пользователя

Чтобы создать пользователя, вам необходимо выполнить запрос `POST` к этому URI, включая JSON.
Полезная нагрузка, содержащая имя пользователя и пароль пользователя:

include::{snippets}/register-user/1/curl-request.adoc[]

Ответ на этот запрос должен иметь код состояния `200 Ok` и содержать токен доступа
и рефреш токен для вновь созданного пользователя:

include::{snippets}/register-user/1/http-response.adoc[]

[[getting_started_authentication_authenticate]]
=== Аутентификация пользователя

Чтобы войти в аккаунт пользователя, вам необходимо выполнить запрос `POST` к этому URI,
включая JSON. Полезная нагрузка, содержащая имя пользователя и пароль пользователя:

include::{snippets}/application-test/1/curl-request.adoc[]

Ответ на этот запрос должен иметь код состояния `200 Ok` и содержать токен доступа
и рефреш токен для вновь созданного пользователя:

include::{snippets}/application-test/1/http-response.adoc[]

[[getting_started_music]]
== Сервис музыки

Сервис музыки предоставляет CRUD REST API для сущности музыки. Сервис предоставляет
четыре базовые функции, используемые при работе с базами данных: создание (англ. create),
чтение (read), модификация (update), удаление (delete).

Возвращаясь к ответу для индекса службы, URI для работы с тегами:
включить как ссылку:

include::{snippets}/index/3/http-response.adoc[]

[[getting_started_music_add]]
=== Добавление трека (POST)

Чтобы добавить трек, вам нужно выполнить запрос POST к этому URI, включая JSON.
Полезная нагрузка, содержащая название песни, описание песни, URI изображения,
URI mp3 файла, также необходимо настроить заголовок `Authorization`, который
содержит access_token из предыдущего шага:

include::{snippets}/application-test/2/curl-request.adoc[]

Ответ на этот запрос должен иметь код состояния `201 Created` и содержать
заголовок `Location`, значением которого является URI вновь созданной песни:

include::{snippets}/application-test/2/http-response.adoc[]

[[getting_started_music_get]]
=== Получение трека (GET)

Для работы с вновь созданной песней вы используете URI в заголовке `Location`.
Например вы можете получить доступ к деталям песни, выполнив запрос `GET`:

include::{snippets}/application-test/5/curl-request.adoc[]

Этот запрос выдаст ответ с деталями песни в теле:

include::{snippets}/application-test/5/http-response.adoc[]

Для получения списка созданных треков вы используете URI '/api/v1/music/all'.
Например вы можете получить доступ к деталям нескольких песен, выполнив запрос `GET`:

include::{snippets}/application-test/6/curl-request.adoc[]

Этот запрос выдаст ответ с деталями песни в теле:

include::{snippets}/application-test/6/http-response.adoc[]

[[getting_started_music_edit]]
=== Изменение трека (PUT)

Для изменения содержимого созданной песни вы используете URI в заголовке `Location`.
Например вы можете изменить детали песни, выполнив запрос `PUT`:

include::{snippets}/application-test/7/curl-request.adoc[]

Этот запрос выдаст ответ с деталями песни в теле:

include::{snippets}/application-test/7/http-response.adoc[]

[[getting_started_music_delete]]
=== Удаление (DELETE)

Для удаления ранее созданной песни вы используете URI в заголовке `Location`.
Например вы можете удалить трек и базы данных, выполнив запрос `DELETE`:

include::{snippets}/application-test/8/curl-request.adoc[]

Ответ на этот запрос должен иметь код состояния `204 No Content`:

include::{snippets}/application-test/8/http-response.adoc[]